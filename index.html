<script>
  const platforms = [
    "Instagram", "TikTok", "YouTube", "Twitter",
    "Pinterest", "Reddit", "Twitch", "Tumblr", "LinkedIn"
  ];

  const api = "https://check-username.checkusername.workers.dev";

  async function checkUsername() {
    const username = document.getElementById("username").value.trim();
    if (!username) return;

    const results = document.getElementById("results");
    results.innerHTML = "<li>Checking...</li>";

    const checks = platforms.map(async (platform) => {
      try {
        const res = await fetch(`${api}/?platform=${platform}&username=${username}`, {
          method: "GET",
        });
        if (!res.ok) throw new Error("API Error");
        const data = await res.json();
        const available = data.available;
        return `<li><span>${platform}:</span> <span class="status ${available ? 'available' : 'taken'}">${available ? '✅ Available' : '❌ Taken'}</span></li>`;
      } catch (e) {
        return `<li><span>${platform}:</span> <span class="status">⚠️ Error</span></li>`;
      }
    });

    const allResults = await Promise.all(checks);
    results.innerHTML = allResults.join("");
  }
</script>
